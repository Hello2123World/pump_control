from openai import OpenAI

def process_text(user_text):
    """
    处理用户输入的文本，使用DeepSeek API提取关键词
    
    :param user_text: 用户输入的文本内容
    :return: 提取的关键词字符串
    """
    client = OpenAI(
        base_url="https://api.deepseek.com/",
        api_key="sk-67cb4dbe7d2e4c1eadf9f3b397d055d1"
    )

    completion = client.chat.completions.create(
        model="deepseek-chat",
        messages=[
            {
                "role": "system",
                "content": "你是一个内容总结专家，旨在生成简洁清晰的长文本摘要。你的任务是获取所提供的内容，并返回5个关键词，其中包含要点、思想和相关细节。这5个关键词应该：每个关键词不超过10个字。-关注原文中的关键事实、概念和观点。避免不相关的细节和过多的措辞。用清晰、中立和客观的语气写作。请确保摘要通俗易懂，并保留原内容的精华。"
            },
            {
                "role": "user",
                "content": user_text
            }
        ]
    )

    # 返回API响应内容
    return completion.choices[0].message.content

# 用于独立测试
if __name__ == "__main__":
    test_text = "根据你的身高和体重（170 cm，130 斤），你可能希望通过健身增加肌肉量，改善体形，或者保持健康。以下是一个为期一周的健身计划，旨在帮助你逐步提高身体素质，结合力量训练和有氧运动，以达到全面提高健康水平的目标。计划的频率为每周 4-5 次，每次训练时长为 60-75 分钟，所需器械包括哑铃、杠铃、拉力带、跑步机或户外跑步。每周的安排如下：周一进行上身力量训练，主要锻炼胸部、肩膀和三头肌；周二进行下身力量训练，重点锻炼腿部和臀部；周三休息或进行轻度有氧运动，如快走或慢跑；周四进行全身力量训练，结合上半身和下半身的复合动作；周五进行核心训练和有氧运动，如跑步或骑行；周六休息或进行轻度活动，周日休息。具体的训练内容包括：周一进行卧推、哑铃飞鸟、哑铃推举等练习，周二重点锻炼深蹲、硬拉和臀桥等下肢动作，周四进行深蹲、硬拉、俯卧撑和引体向上等复合训练，周五进行平板支撑、仰卧起坐、俄罗斯转体等核心训练并结合有氧运动。对于饮食方面，建议增加蛋白质摄入，如鸡胸肉、鱼类、蛋白粉等，同时摄入足够的碳水化合物（如全麦面包、糙米）和健康脂肪（如橄榄油、坚果）来支持训练后的恢复。随着训练的进展，如果你感到适应并希望挑战自己，可以逐渐增加训练强度和重量。健身是一个长期过程，保持正确的训练方法和足够的休息，将帮助你逐步达到理想的身体状态。"
    print(process_text(test_text))



